pipeline{
    agent any 
    
    stages{
        stage('Cleanup workspace'){
            steps{
                script{
                    cleanWs()

                }
            }
        }
                stage('Checkout SCM') {
                    steps{
                        script{
                            checkout scmGit(branches: [[name: '*/main']],\
                            extensions: [], \
                            userRemoteConfigs: [[url: 'https://github.com/mshow1980/Scion-Scope']])

                        }
                    }
                }
                stage('Build Docker Image') {
                    steps{
                        script{
                            sh 'docker build -t mshow1980/pythonapp:$BUILD_NUMBER .'
                        }
                    }
                }
                stage('Docker Login') {
                    steps{
                        script{
                            withDockerRegistry(credentialsId: 'mshow1980', url: 'https://hub.docker.com') {
                            }
                        }
                    }
                }
            }
        }

